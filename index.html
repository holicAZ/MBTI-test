<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css"> <!-- 부트스트랩 수정을 위해선 사용자 css를 밑으로 선언-->
</head>
<body class="container"> <!-- 그리디 효과 주는 용도-->
    <article class="start">
        <h1 class="mt-5 text-center">나의 성향 테스트</h1>  <!-- t = margin-top : 5 -->
        <button type="button" class="btn btn-primary mt-5" onclick='start();'>테스트 시작하기</button>
    </article>
    
    <article class="question">
        <div class="progress mt-5">
            <div class="progress-bar" role="progressbar" style="width: clac(100/12*3%)" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          
        <h2 id="title" class="text-center mt-5">문제</h2>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="btn btn-primary mt-5" >보이면 안됌</button>
        <button id="B" type="button" class="btn btn-primary mt-5" >보이면 안됌</button>
    </article>
    <article class="result">
        <img id="img" class="rounded-circle mt-5" src="goat.jpg" alt="animal">
        <h2 id="animal" class="text-center mt-5">동물이름</h2>
        <h3 id="explain" class="text-center mt-5">설명</h3>
         <!-- Go to www.addthis.com/dashboard to customize your tools -->
         <div class="share addthis_inline_share_toolbox"></div>
    </article>
    <input type="hidden" id="EI" value="0"> <!-- 점수를 매기기 위한 점수판 hidden으로 출력 x -->
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script>
        var num = 1;
        var q = { // 문제 정보 객체로 저장
            1: {"title":"사람을 만나는 자리는 나에게? ", "type":"EI", "A":"사람만나는 자리는 언제나 새롭다.", "B":"모르는 사람이 있으면 꺼려진다."},
            2: {"title":"약속을 잡을 때 나는?", "type":"EI", "A":"주도적으로 모은다.", "B":"대부분 불리는 입장이다."},
            3: {"title":"팀과제를 하게 되었을 때 나는?", "type":"EI", "A":"답답함을 못 이기고 소통을 위해 먼저 말을 건다.", "B":"누군가 말 할 때 까지 기다린다."},
            4: {"title":"여행을 가려고 한다", "type":"SN", "A":"길을 헤매는게 이제는 익숙하다.", "B":"지도만 있으면 어디든 갈 수 있다."},
            5: {"title":"TV에서 사고 뉴스가 나오고 있다. 나는 이때", "type":"SN", "A":"피해자가 먼저 걱정이 된다.", "B":"왜 그런 사고가 일어났는지 궁금해 한다."},
            6: {"title":"연애에 있어서 나는?", "type":"SN", "A":"사람은 한 번 봐서는 모른다. 계속 만나봐야 알지.", "B":"처음 만났을 때 느낌이 중요하다."},
            7: {"title":"일에 있어 나는?", "type":"TF", "A":"과정은 중요하지 않아! 결과만 좋으면 된다.", "B":"결과는 비록 별로라도 과정에 있어 노력했다면 인정이지!"},
            8: {"title":"친구와 술자리에서 서운한 걸 얘기하고 있다.", "type":"TF", "A":"논리정연하게 말해줄 수 있어.", "B":"관계가 나빠질까봐 말 못하겠어."},
            9: {"title":"친구에게 시험 떨어진 것을 말했는데 친구가 점수부터 묻는다. 이때 나는?", "type":"TF", "A":"점수를 말해 주면서 몇점이 부족한지 다시 되새긴다.", "B":"친구가 떨어진 슬픔에 공감하지 않아줘서 서운하다."},
            10: {"title":"어떤 일을 결정해야 하는 상황에서 나는?", "type":"JP", "A":"따져보고 확실한 결정을 할 수 있다.", "B":"결정하기 어려워 피하거나 미룬다."},
            11: {"title":"지금 내 방을 둘러보자.", "type":"JP", "A":"깔끔하고, 원래 있던 자리에 물건이 있다.", "B":"남이 보기엔 지저분 할 수도 있지만 내가 쓰기에 최적화 되어있는 배치이다."},
            12: {"title":"여행이나 일을 할 때 나는?", "type":"JP", "A":"큰 틀이라도 계획을 세우고 진행한다.", "B":"계획은 세워봤자 지키기 힘들다! 세우지 않고 순발력으로 대처한다."},
        }
        var result = {
            "ISTJ": {"animal":"하마", "explain":"하마 설명", "img":"goat.jpg"},
            "ENFP": {"animal":"호랑이", "explain":"호랑이 설명", "img":"goat.jpg"},
            "ENTJ": {"animal":"무무", "explain":"무무 설명", "img":"goat.jpg"},
        }
        function start(){
            $(".start").hide();
            $(".question").show();
            next();
        }
        $("#A").click(function(){
            var type = $("#type").val(); // type 값을 가져오는 JQuery문
            var preValue = $("#"+type).val();
            $("#"+type).val(parseInt(preValue)+1);
            next();
        });
        $("#B").click(function(){
            next();
        });
        function next(){
            if(num==13){ // 마지막 문제까지 완료
                $(".question").hide();
                $(".result").show();
                var mbti = "";
                ($("#EI").val()<2) ? mbti += "I" : mbti += "E";
                ($("#SN").val()<2) ? mbti += "N" : mbti += "S";
                ($("#TF").val()<2) ? mbti += "F" : mbti += "T";
                ($("#JP").val()<2) ? mbti += "P" : mbti += "J";
                alert(mbti);
                $("#img").attr('src',result[mbti]["img"]);
                $("#animal").html(result[mbti]["animal"]);
                $("#explain").html(result[mbti]["explain"]);
            }
            else {
                $(".progress-bar").attr('style','width: calc(100/12*'+num+'%)'); // 속성값 바꾸는 문법
                $("#title").html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
            num++;
            }
        }
    </script>
    <!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-601a1a436dcaeb60"></script>

</body>
</html>